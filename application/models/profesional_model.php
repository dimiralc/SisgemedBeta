<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');class Profesional_model extends CI_Model {	function __construct(){		parent:: __construct();        $this->load->database();	}	    /********************************************************************************     * @Funcion que permite retornar todos los paise     * #@dropdown paises@#      ********************************************************************************/    function cargarPaises(){                //creamos array para los paises        $data = array();        //valor por defecto del select instituciones        $data['']='Seleccione un país';        //cargamos todas las instituciones del sistema        $this->db->select(['p.id_pais','p.nombre']);        $this->db->from('tbl_paises p');        $this->db->order_by("p.nombre", "asc");                foreach($this->db->get()->result() as $row){            // agregamos datos a nuestro array            $data[$row->id_pais] = ucwords($row->nombre);          }        return $data;            }            /********************************************************************************    * @Funcion que permite retornar toda la informacion personal del profesionals    ********************************************************************************/    function datosProfesional($idprofesional){        //cargamos los datos del profesional        $this->db->select([            'p.id_profesional',            'p.id_usuario',            'p.id_perfil_profesional',            'u.username',            'p.rut',            'p.primer_nombre',            'p.segundo_nombre',            'p.apellido_paterno',            'p.apellido_materno',            'p.telefono',            'p.direccion',            'p.correo',            'p.sexo',            'p.fecha_nacimiento',            'p.imagen',            //'pa.id_pais'            ]);        $this->db->from('tbl_profesionales p');        $this->db->join('tbl_usuarios u', 'u.id_usuario = p.id_usuario');        //$this->db->join('tbl_paises pa', 'p.id_pais = pa.id_pais');        $this->db->where('p.id_usuario',$idprofesional);        $datos_profesional = $this->db->get();        if ($datos_profesional->num_rows() > 0)        {            return $datos_profesional->row();        }else{            //esto sirve para mostrar el error en la vista,no es necesario volver al controlador            //$this->session->set_flashdata('usuario_incorrecto','Error al cargar datos del profesional.');            echo "error en consulta SQL";exit();            //redirect(base_url().'login','refresh');        }	}        /********************************************************************************    * @Funcion que permite modificar perfil del profesional     ********************************************************************************/    function modificarDatosPerfil($arr_data){                /********************************************************************************        * @Arreglo con los datos del profesional        ********************************************************************************/        $data = array(            'rut'               => $arr_data['rut'],            'primer_nombre'     => $arr_data['primer_nombre'],            'segundo_nombre'    => $arr_data['segundo_nombre'],            'apellido_paterno'  => $arr_data['apellido_paterno'],            'apellido_materno'  => $arr_data['apellido_materno'],            'telefono'          => $arr_data['telefono'],            'direccion'         => $arr_data['direccion'],            'id_pais'           => $arr_data['pais'],            //'correo'            => $arr_data['rut'],            'sexo'              => $arr_data['genero'],            'fecha_nacimiento'  => $arr_data['fecha_nacimiento']        );        /********************************************************************************        * @Generamos el update(query) de los datos del profesional        ********************************************************************************/         $this->db->where('id_profesional',$arr_data["idprofesional"]);        return $this->db->update('tbl_profesionales', $data);                   }}?>